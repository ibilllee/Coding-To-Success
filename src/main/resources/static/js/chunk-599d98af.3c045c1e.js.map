{"version":3,"sources":["webpack:///./src/network/problem.js","webpack:///./src/components/IndexComponets/Problem.vue?5c1b","webpack:///./src/components/IndexComponets/Problem.vue?61e1","webpack:///src/components/IndexComponets/Problem.vue","webpack:///./src/components/IndexComponets/Problem.vue?be0c","webpack:///./src/components/IndexComponets/Problem.vue"],"names":["submitCode","data","console","log","request","method","url","getAnswer","probId","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","_s","probInfo","probTitle","on","$event","toAnswer","toBack","domProps","content","ref","score","directives","name","rawName","value","expression","style","success","_l","item","key","id","status","disabled","staticRenderFns","created","initParams","userInfo","JSON","parse","localStorage","getItem","getCode","getCodeTimer","setInterval","setItem","code","editor","cases","methods","$router","push","go","jsonString","substring","index","mounted","setEditor","watch","$route","component"],"mappings":"0NAGO,SAASA,EAAYC,GAE1B,OADAC,QAAQC,IAAIF,GACLG,eAAQ,CACbC,OAAQ,OACRC,IAAK,YACLL,SAKG,SAASM,EAAWC,GACzB,OAAOJ,eAAQ,CACbC,OAAQ,MACRC,IAAK,qBAAF,OAAuBE,O,oCChB9B,W,kECAA,IAAIC,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,MAAM,CAACG,MAAM,CAAC,GAAK,UAAU,CAACP,EAAIQ,GAAGR,EAAIS,GAAGT,EAAIU,SAASC,cAAcP,EAAG,YAAY,CAACE,YAAY,mBAAmBC,MAAM,CAAC,KAAO,WAAWK,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOb,EAAIc,cAAc,CAACd,EAAIQ,GAAG,YAAYJ,EAAG,MAAM,CAACQ,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOb,EAAIe,YAAY,CAACX,EAAG,OAAO,CAACE,YAAY,QAAQ,CAACN,EAAIQ,GAAG,YAAY,GAAGJ,EAAG,MAAM,CAACE,YAAY,kBAAkBU,SAAS,CAAC,UAAYhB,EAAIS,GAAGT,EAAIU,SAASO,WAAW,CAACjB,EAAIQ,GAAG,IAAIR,EAAIS,GAAGT,EAAIU,SAASO,SAAS,SAASb,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,MAAM,CAACc,IAAI,YAAYZ,YAAY,cAAcF,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,KAAK,CAACJ,EAAIQ,GAAG,UAAUJ,EAAG,MAAM,CAACE,YAAY,SAAS,CAACN,EAAIQ,GAAG,MAAMR,EAAIS,GAAc,IAAXT,EAAImB,MAAU,OAAOnB,EAAImB,UAAUf,EAAG,MAAM,CAACgB,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAkB,IAAXvB,EAAImB,MAAWK,WAAW,cAAclB,YAAY,SAASmB,MAAM,CAAE,MAAQzB,EAAI0B,QAAQ,QAAQ,QAAS,CAAC1B,EAAIQ,GAAG,IAAIR,EAAIS,GAAGT,EAAI0B,QAAQ,MAAM,QAAQ,SAAStB,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAAa,IAAXN,EAAImB,MAAWf,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACN,EAAIQ,GAAG,sBAAsBJ,EAAG,MAAM,CAACE,YAAY,eAAeN,EAAI2B,GAAI3B,EAAS,OAAE,SAAS4B,GAAM,OAAOxB,EAAG,MAAM,CAACyB,IAAID,EAAKE,GAAGxB,YAAY,cAAcmB,MAAM,CAAE,MAAqB,UAAbG,EAAKG,OAAiB,QAAQ,QAAS,CAAC3B,EAAG,OAAO,CAACE,YAAY,UAAU,CAACN,EAAIQ,GAAG,QAAQR,EAAIS,GAAGmB,EAAKE,OAAO1B,EAAG,OAAO,CAACJ,EAAIQ,GAAGR,EAAIS,GAAGmB,EAAKG,gBAAe,OAAO3B,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,YAAY,CAACE,YAAY,gBAAgBC,MAAM,CAAC,KAAO,UAAU,SAAWP,EAAIgC,SAAS,QAAUhC,EAAIgC,UAAUpB,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOb,EAAIV,gBAAgB,CAACU,EAAIQ,GAAG,aAAa,UACp1DyB,EAAkB,G,sEC6DtB,G,oBAAA,CACEZ,KAAM,UACNa,QAFF,WAEA,WAGIjC,KAAKkC,aACLlC,KAAKmC,SAAWC,KAAKC,MAAMC,aAAaC,QAAQ,aAChDvC,KAAKwC,UAELxC,KAAKyC,aAAeC,aAAY,WAC9BJ,aAAaK,QAAQ,GAA3B,qEACA,MAEErD,KAbF,WAcI,MAAO,CACLO,OAAQ,GACR+C,KAAM,2CACNC,OAAQ,KACRJ,aAAc,KACdV,UAAU,EACVtB,SAAU,KACVqC,MAAO,GAEP5B,MAAO,GACPO,SAAS,EACTU,SAAU,KAGdY,QAAS,CAEPlC,SAFJ,WAGMb,KAAKgD,QAAQC,KAAK,iBAAxB,+BAGInC,OANJ,WAOMd,KAAKgD,QAAQE,IAAI,IAGnB,WAVJ,WAUA,6KACA,cACA,oBAFA,SAGA,gBACA,yBACA,kBALA,UAGA,EAHA,OAOA,cACA,0BACA,aACA,gBACA,gBAEA,kBAbA,iBAcA,aAdA,yCAgBA,SAhBA,8DAgBA,EAhBA,QAiBA,mBAjBA,wBAkBA,aAlBA,4KAuBA,iBACA,yBAxBA,wBAyBA,YACA,eACA,0BA3BA,2BA+BA,YACA,sBACA,iBAjCA,oEAqCI,UA/CJ,WA+CA,+JACA,+CADA,SAEA,kBAFA,OAGA,yBACA,yBAEA,uCACA,4BACA,KARA,8CAWIhB,WA1DJ,WA2DM,IAAN,iDACMlC,KAAKS,SAAW2B,KAAKC,MAAMc,GAC3B,IAAN,yCACMnD,KAAKS,SAASO,QAAUhB,KAAKS,SAASO,QAAQoC,UAAUC,EAAQ,GAChE9D,QAAQC,IAAIQ,KAAKS,WAGnB,QAlEJ,WAkEA,8JACA,sFACA,UACA,SACA,YACA,YACA,yBAGA,eATA,+CAYE6C,QA1GF,WA2GItD,KAAKuD,aAEPC,MAAO,CACLC,OADJ,SACA,UC5KgW,I,wBCQ5VC,EAAY,eACd,EACA5D,EACAkC,GACA,EACA,KACA,WACA,MAIa,aAAA0B,E","file":"js/chunk-599d98af.3c045c1e.js","sourcesContent":["import request from './request'\r\nimport qs from 'qs'\r\n// 提交代码\r\nexport function submitCode (data) {\r\n  console.log(data)\r\n  return request({\r\n    method: 'post',\r\n    url: '/userCode',\r\n    data\r\n  })\r\n}\r\n\r\n// 获取题解\r\nexport function getAnswer (probId) {\r\n  return request({\r\n    method: 'get',\r\n    url: `/answer?problemId=${probId}`\r\n  })\r\n}\r\n\r\n// 获取用户代码\r\nexport function getCode (data) {\r\n  console.log('数据对象', data)\r\n  const { probId, userId } = data\r\n  return request({\r\n    method: 'get',\r\n    url: `/code/get/${probId}/${userId}`\r\n  })\r\n}\r\n\r\n// 存放用户代码\r\nexport function saveCode (data) {\r\n  return request({\r\n    method: 'post',\r\n    url: '/code/save',\r\n    data\r\n  })\r\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Problem.vue?vue&type=style&index=0&id=09d88b61&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"problem-page\"},[_c('div',{staticClass:\"main-container\"},[_c('div',{staticClass:\"left-part\"},[_c('div',{staticClass:\"problem-title\"},[_c('div',{attrs:{\"id\":\"title\"}},[_vm._v(_vm._s(_vm.probInfo.probTitle))]),_c('el-button',{staticClass:\"to-answer-button\",attrs:{\"type\":\"success\"},on:{\"click\":function($event){return _vm.toAnswer()}}},[_vm._v(\" 查看题解 \")]),_c('div',{on:{\"click\":function($event){return _vm.toBack()}}},[_c('span',{staticClass:\"back\"},[_vm._v(\"返回>\")])])],1),_c('div',{staticClass:\"problem-content\",domProps:{\"innerHTML\":_vm._s(_vm.probInfo.content)}},[_vm._v(\" \"+_vm._s(_vm.probInfo.content)+\" \")])]),_c('div',{staticClass:\"right-part\"},[_c('div',{ref:\"cppEditor\",staticClass:\"code-part\"}),_c('div',{staticClass:\"result-part\"},[_c('div',{staticClass:\"result-title\"},[_c('h3',[_vm._v(\"返回结果\")]),_c('div',{staticClass:\"score\"},[_vm._v(\"总分:\"+_vm._s(_vm.score==''?'暂无总分':_vm.score))]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.score!=''),expression:\"score!=''\"}],staticClass:\"status\",style:({'color':_vm.success?'green':'red'})},[_vm._v(\"(\"+_vm._s(_vm.success?'通过！':'未通过!')+\")\")])]),_c('div',{staticClass:\"result-content\"},[(_vm.score=='')?_c('div',{staticClass:\"null\"},[_vm._v(\" 代码尚未提交，未有任何结果！ \")]):_c('div',{staticClass:\"result-list\"},_vm._l((_vm.cases),function(item){return _c('div',{key:item.id,staticClass:\"result-item\",style:({'color':item.status=='Accept'?'green':'red'})},[_c('span',{staticClass:\"dataId\"},[_vm._v(\"用例序号:\"+_vm._s(item.id))]),_c('span',[_vm._v(_vm._s(item.status))])])}),0)])]),_c('div',{staticClass:\"button-part\"},[_c('el-button',{staticClass:\"answer-button\",attrs:{\"type\":\"primary\",\"disabled\":_vm.disabled,\"loading\":_vm.disabled},on:{\"click\":function($event){return _vm.submitCode()}}},[_vm._v(\" 提交代码 \")])],1)])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"problem-page\">\r\n        <div class=\"main-container\">\r\n                  <!-- 左侧部分 -->\r\n                <div class=\"left-part\">\r\n                    <div class=\"problem-title\">\r\n                        <div id='title'>{{probInfo.probTitle}}</div>\r\n                        <el-button type=\"success\" class='to-answer-button'\r\n                        @click=\"toAnswer()\">\r\n                            查看题解\r\n                        </el-button>\r\n                        <div @click=\"toBack()\">\r\n                            <span class=\"back\">返回></span>\r\n                        </div>\r\n                    </div>\r\n                     <div class=\"problem-content\" v-html=\"probInfo.content\">\r\n                          {{probInfo.content}}\r\n                    </div>\r\n                </div>\r\n                <!-- 左侧部分结束 -->\r\n                <!-- 右侧部分开始 -->\r\n                <div class=\"right-part\">\r\n                    <div class=\"code-part\" ref='cppEditor'>\r\n                    </div>\r\n                    <div class=\"result-part\">\r\n                        <div class=\"result-title\">\r\n                            <h3>返回结果</h3>\r\n                            <div class=\"score\">总分:{{score==''?'暂无总分':score}}</div>\r\n                            <div class=\"status\" v-show=\"score!=''\"\r\n                            :style=\"{'color':success?'green':'red'}\">({{success?'通过！':'未通过!'}})</div>\r\n                        </div>\r\n                        <div class=\"result-content\">\r\n                            <div class=\"null\" v-if=\"score==''\">\r\n                                代码尚未提交，未有任何结果！\r\n                            </div>\r\n\r\n                            <div class=\"result-list\" v-else >\r\n                                <div class=\"result-item\" v-for=\"item in cases\" :key=\"item.id\"\r\n                                :style=\"{'color':item.status=='Accept'?'green':'red'}\">\r\n                                   <span class='dataId'>用例序号:{{item.id}}</span>\r\n                                   <span>{{item.status}}</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"button-part\">\r\n                        <el-button type=\"primary\" class='answer-button'\r\n                        @click=\"submitCode()\" :disabled=\"disabled\" :loading=\"disabled\">\r\n                            提交代码\r\n                        </el-button>\r\n                    </div>\r\n                </div>\r\n                <!-- 右侧部分结束 -->\r\n         </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { CppEditor } from 'cpp-editor'\r\nimport { submitCode, getAnswer, getCode } from '../../network/problem.js'\r\nimport axios from 'axios'\r\nimport qs from 'qs'\r\nexport default {\r\n  name: 'Problem',\r\n  created () {\r\n    // 将路径参数储存起来\r\n    // this.probId=this.$route.params.id;\r\n    this.initParams()\r\n    this.userInfo = JSON.parse(localStorage.getItem('userInfo'))\r\n    this.getCode()\r\n    // 暂存代码\r\n    this.getCodeTimer = setInterval(() => {\r\n      localStorage.setItem(`${this.userInfo.userId}${this.probInfo.probId}code`, this.code)\r\n    }, 1000)\r\n  },\r\n  data () {\r\n    return {\r\n      probId: '',\r\n      code: '#include<iostream>\\nusing namespace std;',\r\n      editor: null,\r\n      getCodeTimer: null,\r\n      disabled: false,\r\n      probInfo: null,\r\n      cases: [\r\n      ],\r\n      score: '',\r\n      success: true,\r\n      userInfo: {}\r\n    }\r\n  },\r\n  methods: {\r\n    // 去往题解\r\n    toAnswer () {\r\n      this.$router.push(`/index/answer/${this.probInfo.probId}`)\r\n    },\r\n    // 返回\r\n    toBack () {\r\n      this.$router.go(-1)\r\n    },\r\n    // 提交代码\r\n    async submitCode () {\r\n      this.disabled = true\r\n      console.log(this.code)\r\n      const res = await submitCode({\r\n        probId: this.probInfo.probId,\r\n        userCode: this.code\r\n      })\r\n      this.disabled = false\r\n      const data = JSON.parse(res.data.data)\r\n      this.success = true\r\n      this.cases = data.cases\r\n      this.score = data.score\r\n\r\n      if (this.cases.length == 0) {\r\n        this.success = false\r\n      } else {\r\n        for (const item of this.cases) {\r\n          if (item.status != 'Accept') {\r\n            this.success = false\r\n            break\r\n          }\r\n        }\r\n      }\r\n      console.log(data)\r\n      if (data.error = 'Compile Error') {\r\n        this.$message({\r\n          type: 'warning',\r\n          message: '编译失败，请检查代码问题！'\r\n        })\r\n        return\r\n      }\r\n      this.$message({\r\n        message: '编译成功，请查看结果!',\r\n        type: 'success'\r\n      })\r\n    },\r\n    // 设置编辑器\r\n    async setEditor () {\r\n      this.editor = new CppEditor(this.$refs.cppEditor)\r\n      await this.editor.render()\r\n      this.editor.setCode(this.code)\r\n      this.editor.setDarkMode(true)\r\n      // 开启定时器，定期将编辑器代码赋值给code\r\n      this.getCodeTimer = setInterval(() => {\r\n        this.code = this.editor.getCode()\r\n      }, 1000)\r\n    },\r\n    // 初始化参数\r\n    initParams () {\r\n      const jsonString = decodeURIComponent(this.$route.params.problem)\r\n      this.probInfo = JSON.parse(jsonString)\r\n      const index = this.probInfo.content.indexOf('</h4>')\r\n      this.probInfo.content = this.probInfo.content.substring(index + 5)\r\n      console.log(this.probInfo)\r\n    },\r\n    // 获取用户暂存代码\r\n    async getCode () {\r\n      const code = localStorage.getItem(`${this.userInfo.userId}${this.probInfo.probId}code`)\r\n      if (code != null) {\r\n        this.code = code\r\n        this.$message({\r\n          type: 'info',\r\n          message: '已恢复您上次编辑的代码'\r\n        })\r\n      }\r\n      console.log(code)\n    }\r\n  },\r\n  mounted () {\r\n    this.setEditor()\r\n  },\r\n  watch: {\r\n    $route (from, to) {\r\n      //    this.initParams();\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n    .problem-page\r\n    {\r\n        padding: 20px;\r\n        color:var(--font_color);\r\n        height: 650px;\r\n\r\n    }\r\n    .problem-title\r\n    {\r\n        height: 60px;\r\n        line-height: 60px;\r\n        display: flex;\r\n        border-bottom: 1px solid #eee;\r\n        width: 100%;\r\n        position: relative;\r\n    }\r\n    .answer-button\r\n    {\r\n        margin-left: 400px;\r\n        height: 40px;\r\n        margin-top:10px;\r\n    }\r\n    .left-part\r\n    {\r\n        flex:1;\r\n        border-right:5px solid #eee;\r\n        height: 640px;\r\n    }\r\n    .right-part\r\n    {\r\n        flex:1;\r\n        height: 640px;\r\n        padding:10px;\r\n    }\r\n    .back{\r\n        font-size:14px;\r\n        margin-left: 10px;\r\n        color:#D893F5;\r\n    }\r\n    .back:hover\r\n    {\r\n        cursor: pointer;\r\n        color:#BB43F9;\r\n    }\r\n    .main-container\r\n    {\r\n        width: 100%;\r\n        display: flex;\r\n    }\r\n    .problem-content\r\n    {\r\n        padding:10px;\r\n        line-height: 30px;\r\n    }\r\n    .code-part\r\n    {\r\n        border-radius: 10px;\r\n        border:1px solid #eee;\r\n        height: 350px;\r\n        padding:10px;\r\n        background-color: #1E1E1E;\r\n    }\r\n    .button-part{\r\n        width: 100%;\r\n        justify-content: flex-end;\r\n        display: flex;\r\n    }\r\n    .result-part\r\n    {\r\n        width: 100%;\r\n        border-radius: 10px;\r\n        border:1px solid #999;\r\n        margin-top: 20px;\r\n        height: 200px;\r\n        padding:10px;\r\n        line-height: 30px;\r\n        color:#1E1E1E;\r\n        overflow: scroll;\r\n    }\r\n    .result-title\r\n    {\r\n        display: flex;\r\n    }\r\n    .result-title h2\r\n    {\r\n        padding-right: 400px;\r\n    }\r\n    .score\r\n    {\r\n        margin-left: 350px;\r\n    }\r\n    .dataId\r\n    {\r\n        margin-right: 20px;\r\n    }\r\n    #title\r\n    {\r\n        font-size: 30px;\r\n        font-weight: 700;\r\n    }\r\n    .to-answer-button\r\n    {\r\n        position: absolute;\r\n        right: 40px;\r\n        height: 50px;\r\n    }\r\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Problem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Problem.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Problem.vue?vue&type=template&id=09d88b61&scoped=true&\"\nimport script from \"./Problem.vue?vue&type=script&lang=js&\"\nexport * from \"./Problem.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Problem.vue?vue&type=style&index=0&id=09d88b61&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"09d88b61\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}